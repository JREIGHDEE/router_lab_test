<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1024">
<title>ASUS RT-N12 | Wireless Router Simulator</title>
<style>
    /* --- CORE VARIABLES --- */
    :root {
        --bg-body: #212830;
        --bg-header: #111;
        --bg-sidebar: #283038;
        --bg-content: #212830;
        --bg-panel: #4d5962;
        --bg-input: #576169;
        --blue: #00AAFF;
        --text: #FFF;
        --text-dim: #cfcfcf;
        --border: #666;
    }

    body {
        margin: 0; padding: 0;
        font-family: Arial, Helvetica, sans-serif;
        background: var(--bg-body);
        color: var(--text);
        font-size: 12px;
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }

    /* --- LOGIN OVERLAY --- */
    #login-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.8);
        z-index: 9999;
        display: flex; justify-content: center; align-items: center;
    }
    .login-box {
        background: #F0F0F0; color: #000; padding: 20px;
        width: 320px; border-radius: 5px; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .login-box h3 { margin: 0 0 10px 0; font-size: 16px; color: #0066cc; }
    .login-box input { width: 92%; padding: 5px; margin: 5px 0; border: 1px solid #ccc; }
    .login-btns { text-align: right; margin-top: 10px; }
    .login-btns button { padding: 5px 15px; cursor: pointer; }

    /* --- HEADER --- */
    #header {
        height: 60px; background: linear-gradient(to bottom, #444, #111);
        display: flex; justify-content: space-between; align-items: center;
        padding: 0 20px; border-bottom: 3px solid var(--blue);
        box-shadow: 0 2px 5px #000;
        z-index: 10;
    }
    .logo { font-size: 26px; font-weight: bold; font-style: italic; letter-spacing: 1px; }
    .model { font-size: 14px; background: #666; padding: 2px 6px; border-radius: 3px; margin-left: 10px; font-style: normal; }
    .top-info { display: flex; gap: 15px; align-items: center; color: #aaa; }
    .logout-btn {
        background: #333; border: 1px solid #555; color: #fff;
        padding: 5px 15px; cursor: pointer; border-radius: 3px;
    }

    /* --- LAYOUT --- */
    #main { display: flex; height: 100%; }
    
    /* SIDEBAR */
    #sidebar {
        width: 200px; background: var(--bg-sidebar); border-right: 1px solid #000;
        overflow-y: auto; flex-shrink: 0;
    }
    .menu-cat {
        padding: 8px 15px; color: var(--blue); font-weight: bold;
        background: linear-gradient(to bottom, #3e464f, #2a323a);
        border-top: 1px solid #555; border-bottom: 1px solid #000;
        cursor: default; text-shadow: 1px 1px #000;
    }
    .menu-item {
        padding: 10px 20px; cursor: pointer; border-bottom: 1px solid #333;
        color: #ddd; transition: 0.1s;
    }
    .menu-item:hover { background: #3d4a56; color: #fff; }
    .menu-item.active {
        background: #36404a; color: #fff;
        border-left: 5px solid var(--blue); padding-left: 15px;
    }

    /* CONTENT AREA */
    #content { flex: 1; padding: 20px; overflow-y: auto; background: var(--bg-content); }

    /* --- UI ELEMENTS --- */
    .page { display: none; }
    .page.active { display: block; }
    
    .tabs { display: flex; border-bottom: 1px solid #666; margin-bottom: 15px; }
    .tab {
        padding: 6px 15px; background: #333; margin-right: 4px;
        cursor: pointer; border-radius: 4px 4px 0 0; color: #aaa; border: 1px solid #444; border-bottom: none;
    }
    .tab.active { background: var(--blue); color: #fff; font-weight: bold; border-color: var(--blue); }
    
    table.form-table { width: 100%; border-collapse: collapse; background: #38424b; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }
    table.form-table th { width: 40%; text-align: left; padding: 10px; background: #2f3841; font-weight: normal; color: #fff; border-bottom: 1px solid #555; }
    table.form-table td { padding: 10px; border-bottom: 1px solid #555; }
    
    input[type="text"], input[type="password"], select {
        padding: 4px; width: 220px; background: var(--bg-input);
        border: 1px solid #777; color: #fff; border-radius: 2px;
    }
    
    .btn-wrap { text-align: right; margin-top: 15px; background: #2f3841; padding: 10px; border-radius: 0 0 5px 5px; }
    .btn-apply {
        background: linear-gradient(#00AAFF, #0088CC); border: 1px solid #0077b3;
        color: #fff; padding: 6px 25px; cursor: pointer; font-weight: bold; border-radius: 3px;
    }

    /* --- NETWORK MAP SPECIFIC --- */
    .map-wrapper { display: flex; height: 100%; gap: 15px; }
    .map-graphic { flex: 2; position: relative; display: flex; justify-content: center; align-items: center; }
    .map-status { flex: 1; background: #2e363e; border: 1px solid #555; height: 350px; }
    
    .status-head { background: linear-gradient(#56626d, #2d353d); padding: 8px; font-weight: bold; border-bottom: 1px solid #000; }
    .status-body { padding: 15px; font-size: 11px; }
    
    .icon-node {
        width: 90px; height: 90px; background: #222; border: 2px solid #555;
        border-radius: 10px; display: flex; flex-direction: column;
        align-items: center; justify-content: center; cursor: pointer;
        z-index: 2; position: relative; margin: 0 40px;
    }
    .icon-node.selected { border-color: var(--blue); box-shadow: 0 0 10px var(--blue); }
    .icon-node span { font-size: 40px; }
    .conn-line { height: 4px; background: #666; width: 100px; position: absolute; top: 50%; z-index: 1; }
    .line-left { left: 25%; }
    .line-right { right: 25%; }
    .conn-line.active { background: var(--blue); }

    /* --- TOGGLE SWITCH --- */
    .switch { position: relative; display: inline-block; width: 40px; height: 20px; vertical-align: middle; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 20px; }
    .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .slider { background-color: var(--blue); }
    input:checked + .slider:before { transform: translateX(20px); }

    /* --- LOADING BAR --- */
    #loader {
        display: none; position: fixed; top:0; left:0; width:100%; height:100%;
        background: rgba(0,0,0,0.8); z-index: 10000;
        justify-content: center; align-items: center; flex-direction: column;
    }
    .progress-box { width: 300px; background: #333; padding: 20px; border-radius: 5px; text-align: center; border: 1px solid var(--blue); }
    .progress-text { margin-bottom: 10px; color: var(--blue); }

</style>
</head>
<body>

<!-- LOADER -->
<div id="loader"><div class="progress-box"><div class="progress-text">Processing...</div><div id="pct">0%</div></div></div>

<!-- LOGIN (Slide 21) -->
<div id="login-overlay">
    <div class="login-box">
        <h3>Windows Security</h3>
        <p style="font-size:12px; margin-bottom:15px;">The server 192.168.1.1 at RT-N12 requires a username and password.</p>
        <input type="text" id="user" placeholder="User name">
        <input type="password" id="pass" placeholder="Password">
        <div class="login-btns">
            <button onclick="login()">OK</button>
            <button onclick="alert('Access Denied');">Cancel</button>
        </div>
        <div id="login-err" style="color:red; font-size:11px; margin-top:5px; display:none;">Admin / networkadmin</div>
    </div>
</div>

<!-- HEADER (Slide 22) -->
<div id="header">
    <div class="logo">ASUS <span class="model">RT-N12</span></div>
    <div class="top-info">
        <div>Firmware Version: 3.0.0.4.380_7378</div>
        <div>SSID: <span id="head-ssid">ASUS</span></div>
        <button class="logout-btn" onclick="location.reload()">Logout</button>
    </div>
</div>

<!-- MAIN LAYOUT -->
<div id="main">
    <!-- SIDEBAR -->
    <div id="sidebar">
        <div class="menu-cat">General</div>
        <div class="menu-item active" onclick="nav('map', this)">Network Map</div>
        <div class="menu-item" onclick="nav('guest', this)">Guest Network</div>
        <div class="menu-item" onclick="nav('qos', this)">Traffic Manager</div>
        <div class="menu-item" onclick="nav('parental', this)">Parental Controls</div>
        
        <div class="menu-cat">Advanced Settings</div>
        <div class="menu-item" onclick="nav('wireless', this)">Wireless</div>
        <div class="menu-item" onclick="nav('lan', this)">LAN</div>
        <div class="menu-item" onclick="nav('wan', this)">WAN</div>
        <div class="menu-item" onclick="nav('ipv6', this)">IPv6</div>
        <div class="menu-item" onclick="nav('vpn', this)">VPN Server</div>
        <div class="menu-item" onclick="nav('firewall', this)">Firewall</div>
        <div class="menu-item" onclick="nav('admin', this)">Administration</div>
        <div class="menu-item" onclick="nav('log', this)">System Log</div>
        <div class="menu-item" onclick="nav('tools', this)">Network Tools</div>
    </div>

    <!-- CONTENT -->
    <div id="content">

        <!-- 1. NETWORK MAP -->
        <div id="page-map" class="page active">
            <div class="map-wrapper">
                <div class="map-graphic">
                    <div class="conn-line line-left active"></div>
                    <div class="conn-line line-right active"></div>
                    
                    <div class="icon-node" id="icon-internet" onclick="mapSelect('internet')">
                        <span>üåê</span>
                        <div style="margin-top:5px; font-weight:bold;">Internet</div>
                        <div style="color:var(--blue); font-size:10px;">Connected</div>
                    </div>
                    
                    <div class="icon-node selected" id="icon-router" onclick="mapSelect('router')">
                        <span>üì∂</span>
                        <div style="margin-top:5px; font-weight:bold;">RT-N12</div>
                    </div>
                    
                    <div class="icon-node" id="icon-clients" onclick="mapSelect('clients')">
                        <span style="background:gold; color:black; border-radius:50%; width:20px; height:20px; font-size:12px; position:absolute; top:-5px; right:-5px; display:flex; align-items:center; justify-content:center;">2</span>
                        <span>üíª</span>
                        <div style="margin-top:5px; font-weight:bold;">Clients</div>
                    </div>
                </div>

                <div class="map-status">
                    <div class="status-head" id="map-title">System Status</div>
                    <div class="status-body" id="map-body">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. GUEST NETWORK -->
        <div id="page-guest" class="page">
            <h2 style="border-bottom:1px solid #555; padding-bottom:10px;">Guest Network</h2>
            <div style="background:#2e363e; padding:20px; border-radius:5px;">
                <div style="display:flex; gap:20px;">
                    <div style="border:1px solid #555; padding:15px; width:200px;">
                        <h4>2.4GHz</h4>
                        <div style="margin-bottom:10px;">Guest Network 1</div>
                        <button id="btn-guest-toggle" onclick="toggleGuest()" style="width:100%; padding:5px; background:#444; border:1px solid #666; color:#fff; cursor:pointer;">Enable</button>
                    </div>
                </div>

                <div id="guest-form" style="display:none; margin-top:20px;">
                    <table class="form-table">
                        <tr><th>Network Name (SSID)</th><td><input type="text" id="guest_ssid" value="ASUS_Guest"></td></tr>
                        <tr><th>Authentication Method</th><td><select><option>Open System</option><option>WPA2-Personal</option></select></td></tr>
                        <tr><th>Access time</th><td><select><option>Limitless</option><option>Specified</option></select></td></tr>
                        <tr><th>Access Intranet</th>
                            <td>
                                <input type="radio" name="g_intra" value="off" checked> Disable 
                                <input type="radio" name="g_intra" value="on"> Enable
                            </td>
                        </tr>
                    </table>
                    <div class="btn-wrap"><button class="btn-apply" onclick="save('Guest Network')">Apply</button></div>
                </div>
            </div>
        </div>

        <!-- 3. TRAFFIC MANAGER / QoS -->
        <div id="page-qos" class="page">
            <div class="tabs">
                <div class="tab active">QoS</div>
                <div class="tab">Traffic Monitor</div>
            </div>
            <table class="form-table">
                <tr>
                    <th>Smart QoS</th>
                    <td>
                        <label class="switch">
                            <input type="checkbox" id="qos_switch">
                            <span class="slider"></span>
                        </label>
                        <span style="margin-left:10px;">ON</span>
                    </td>
                </tr>
                <tr><th>Upload Bandwidth</th><td><input type="text" placeholder="Mb/s"></td></tr>
                <tr><th>Download Bandwidth</th><td><input type="text" placeholder="Mb/s"></td></tr>
            </table>
            <div style="margin-top:10px; text-align:right;">
                <button style="background:#444; color:#fff; border:1px solid #666; padding:5px;">User-defined Priority</button>
            </div>
            <div class="btn-wrap"><button class="btn-apply" onclick="save('QoS')">Save</button></div>
        </div>

        <!-- 4. WIRELESS -->
        <div id="page-wireless" class="page">
            <div class="tabs">
                <div class="tab active" onclick="tabSub('wl', 'gen', this)">General</div>
                <div class="tab">WPS</div>
                <div class="tab">WDS</div>
                <div class="tab" onclick="tabSub('wl', 'mac', this)">Wireless MAC Filter</div>
                <div class="tab">Professional</div>
            </div>

            <!-- Wireless General -->
            <div id="wl-gen">
                <table class="form-table">
                    <tr><th>SSID (Network Name)</th><td><input type="text" id="wl_ssid" value="ASUS"></td></tr>
                    <tr><th>Hide SSID</th><td><input type="radio" name="hssid"> Yes <input type="radio" name="hssid" checked> No</td></tr>
                    <tr><th>Wireless Mode</th><td><select><option>Auto</option><option>N Only</option></select></td></tr>
                    <tr><th>Channel Bandwidth</th><td><select><option>20/40 MHz</option></select></td></tr>
                    <tr><th>Authentication Method</th><td><select id="wl_auth"><option>Open System</option><option selected>WPA2-Personal</option></select></td></tr>
                    <tr><th>WPA Encryption</th><td><select><option>AES</option><option>TKIP</option></select></td></tr>
                    <tr><th>WPA Pre-Shared Key</th><td><input type="password" id="wl_key" value="12345678" onclick="this.type='text'"></td></tr>
                </table>
                <div class="btn-wrap"><button class="btn-apply" onclick="save('Wireless General')">Apply</button></div>
            </div>

            <!-- Wireless MAC Filter -->
            <div id="wl-mac" style="display:none;">
                <div style="background:#555; padding:5px; margin-bottom:10px;">Wireless MAC filter allows you to control packets from devices with specified MAC address.</div>
                <table class="form-table">
                    <tr><th>Enable MAC Filter</th><td><input type="radio" name="macf"> Yes <input type="radio" name="macf" checked> No</td></tr>
                    <tr><th>MAC Filter Mode</th><td><select><option>Accept</option><option>Reject</option></select></td></tr>
                    <tr><th>MAC Filter List</th><td><input type="text" placeholder="XX:XX:XX:XX:XX:XX"> <button>+</button></td></tr>
                </table>
                <div class="btn-wrap"><button class="btn-apply" onclick="save('MAC Filter')">Apply</button></div>
            </div>
        </div>

        <!-- 5. LAN (UPDATED 1:1) -->
        <div id="page-lan" class="page">
            <div class="tabs">
                <div class="tab active" onclick="tabSub('lan', 'ip', this)">LAN IP</div>
                <div class="tab" onclick="tabSub('lan', 'dhcp', this)">DHCP Server</div>
                <div class="tab">Route</div>
                <div class="tab">IPTV</div>
            </div>

            <!-- LAN IP TAB (Active by default) -->
            <div id="lan-ip">
                <table class="form-table">
                    <tr><th>Device Name</th><td><input type="text" value="RT-N12"></td></tr>
                    <tr><th>IP Address</th><td><input type="text" id="lan_ip_addr" value="192.168.1.1"></td></tr>
                    <tr><th>Subnet Mask</th><td><input type="text" id="lan_netmask" value="255.255.255.0"></td></tr>
                </table>
                <div class="btn-wrap"><button class="btn-apply" onclick="save('LAN IP')">Apply</button></div>
            </div>

            <!-- DHCP SERVER TAB -->
            <div id="lan-dhcp" style="display:none;">
                <table class="form-table">
                    <tr><th>Enable the DHCP Server</th><td><input type="radio" name="dhcp" checked> Yes <input type="radio" name="dhcp"> No</td></tr>
                    <tr><th>RT-N12 Domain Name</th><td><input type="text"></td></tr>
                    <tr><th>IP Pool Starting Address</th><td><input type="text" id="pool_start" value="192.168.1.2"></td></tr>
                    <tr><th>IP Pool Ending Address</th><td><input type="text" id="pool_end" value="192.168.1.254"></td></tr>
                    <tr><th>Lease time</th><td><input type="text" value="86400"></td></tr>
                    <tr><th>Default Gateway</th><td><input type="text"></td></tr>
                    <tr><th>DNS Server</th><td><input type="text"></td></tr>
                </table>
                <div class="btn-wrap"><button class="btn-apply" onclick="save('LAN DHCP')">Apply</button></div>
            </div>
        </div>

        <!-- 6. IPv6 -->
        <div id="page-ipv6" class="page">
            <div class="tabs"><div class="tab active">IPv6</div></div>
            <table class="form-table">
                <tr><th>Connection type</th><td><select><option>Native</option><option selected>Static IPv6</option></select></td></tr>
                
                <tr><td colspan="2" style="background:#333; color:var(--blue); font-weight:bold;">IPv6 WAN Setting</td></tr>
                <tr><th>WAN IPv6 Address</th><td><input type="text" value="2001:db8:acad::0"></td></tr>
                <tr><th>WAN Prefix Length</th><td><input type="text" value="64"></td></tr>
                <tr><th>WAN IPv6 Gateway</th><td><input type="text" value="2001:db8:acad::1"></td></tr>

                <tr><td colspan="2" style="background:#333; color:var(--blue); font-weight:bold;">IPv6 LAN Setting</td></tr>
                <tr><th>LAN IPv6 Address</th><td><input type="text" value="2001:db8:acad::1"></td></tr>
                <tr><th>LAN Prefix Length</th><td><input type="text" value="64"></td></tr>
                <tr><th>Auto Configuration Setting</th><td><input type="radio"> Stateless <input type="radio" checked> Stateful</td></tr>
                <tr><th>IP Pool Starting Address</th><td><input type="text" value="2001:db8:acad::1000"></td></tr>
                <tr><th>IP Pool Ending Address</th><td><input type="text" value="2001:db8:acad::2000"></td></tr>
            </table>
            <div class="btn-wrap"><button class="btn-apply" onclick="save('IPv6 Config')">Apply</button></div>
        </div>

        <!-- 7. FIREWALL -->
        <div id="page-firewall" class="page">
            <div class="tabs">
                <div class="tab active" onclick="tabSub('fw', 'gen', this)">General</div>
                <div class="tab" onclick="tabSub('fw', 'url', this)">URL Filter</div>
                <div class="tab" onclick="tabSub('fw', 'key', this)">Keyword Filter</div>
                <div class="tab">Network Services Filter</div>
            </div>

            <!-- General -->
            <div id="fw-gen">
                <table class="form-table">
                    <tr><th>Enable Firewall</th><td><input type="radio" checked> Yes <input type="radio"> No</td></tr>
                    <tr><th>Enable DoS protection</th><td><input type="radio" checked> Yes <input type="radio"> No</td></tr>
                    <tr><th>Logged packets type</th><td><select><option>None</option><option>Dropped</option></select></td></tr>
                    <tr><th>Respond Ping Request from WAN</th><td><input type="radio"> Yes <input type="radio" checked> No</td></tr>
                </table>
                <div class="btn-wrap"><button class="btn-apply" onclick="save('Firewall General')">Apply</button></div>
            </div>

            <!-- URL Filter -->
            <div id="fw-url" style="display:none;">
                <p style="padding:10px;">Keywords for the sites you want to block (e.g., "www.abc.com").</p>
                <table class="form-table">
                    <tr><th>Enable URL Filter</th><td><input type="radio" name="urlf"> Enabled <input type="radio" name="urlf" checked> Disabled</td></tr>
                </table>
                <table class="form-table" style="margin-top:15px;">
                    <tr><th style="width:80%">URL Filter List</th><th>Add / Delete</th></tr>
                    <tr><td><input type="text" style="width:90%"></td><td><button>+</button></td></tr>
                    <tr><td colspan="2" style="text-align:center; color:yellow;">No data in table.</td></tr>
                </table>
                <div class="btn-wrap"><button class="btn-apply" onclick="save('URL Filter')">Apply</button></div>
            </div>

            <!-- Keyword Filter -->
            <div id="fw-key" style="display:none;">
                <p style="padding:10px;">Keyword filter allows you to block access to webpages containing specified keywords.</p>
                <table class="form-table">
                    <tr><th>Enable Keyword Filter</th><td><input type="radio" name="keyf"> Enabled <input type="radio" name="keyf" checked> Disabled</td></tr>
                </table>
                <table class="form-table" style="margin-top:15px;">
                    <tr><th style="width:80%">Keyword Filter List</th><th>Add / Delete</th></tr>
                    <tr><td><input type="text" style="width:90%"></td><td><button>+</button></td></tr>
                    <tr><td colspan="2" style="text-align:center; color:yellow;">No data in table.</td></tr>
                </table>
                <div class="btn-wrap"><button class="btn-apply" onclick="save('Keyword Filter')">Apply</button></div>
            </div>
        </div>

        <!-- 8. NETWORK TOOLS -->
        <div id="page-tools" class="page">
            <div class="tabs">
                <div class="tab active">Network Analysis</div>
                <div class="tab">Netstat</div>
                <div class="tab">Wake on LAN</div>
            </div>
            <div style="background:#2e363e; padding:15px; margin-bottom:15px;">
                Send ICMP ECHO_REQUEST packets to network host.
            </div>
            <table class="form-table">
                <tr><th>Method</th><td><select id="tool_method"><option>Ping</option><option>Traceroute</option><option>Nslookup</option></select></td></tr>
                <tr><th>Target</th><td><input type="text" id="tool_target" placeholder="www.google.com"></td></tr>
                <tr><th>Count</th><td><input type="text" value="5" style="width:50px;"></td></tr>
            </table>
            <div class="btn-wrap" style="background:transparent; padding:10px 0;">
                <button class="btn-apply" onclick="runDiagnose()">Diagnose</button>
            </div>
            <textarea id="diag-out" style="width:100%; height:200px; background:#111; color:#0f0; border:1px solid #555; padding:10px; font-family:monospace;" readonly></textarea>
        </div>
        
        <!-- PLACEHOLDERS -->
        <div id="page-wan" class="page"><h2 style="padding:20px;">WAN Settings Placeholder</h2></div>
        <div id="page-vpn" class="page"><h2 style="padding:20px;">VPN Server Placeholder</h2></div>
        <div id="page-admin" class="page"><h2 style="padding:20px;">Administration Placeholder</h2></div>
        <div id="page-log" class="page"><h2 style="padding:20px;">System Log Placeholder</h2></div>
        <div id="page-parental" class="page"><h2 style="padding:20px;">Parental Controls Placeholder</h2></div>

    </div>
</div>

<script>
    // --- STATE ---
    let state = {
        ssid: "ASUS",
        auth: "WPA2-Personal",
        key: "12345678",
        lanIp: "192.168.1.1",
        clients: 2
    };

    // --- INIT ---
    function login() {
        const u = document.getElementById('user').value;
        const p = document.getElementById('pass').value;
        if(u === 'admin' && p === 'networkadmin') {
            document.getElementById('login-overlay').style.display = 'none';
            mapSelect('router'); // Load Map
        } else {
            document.getElementById('login-err').style.display = 'block';
        }
    }

    // --- NAV ---
    function nav(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('page-'+id).classList.add('active');
        
        document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
        el.classList.add('active');

        // Special: If Map, reset map view
        if(id === 'map') mapSelect('router');
    }

    function tabSub(prefix, id, el) {
        // Toggle tabs visual
        const parent = el.parentElement;
        parent.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        el.classList.add('active');

        // Toggle content
        // Hide all divs starting with prefix-
        const siblings = parent.parentElement.querySelectorAll('div[id^="'+prefix+'-"]');
        siblings.forEach(div => div.style.display = 'none');

        // Show specific one
        const target = document.getElementById(prefix+'-'+id);
        if(target) target.style.display = 'block';
    }

    // --- MAP LOGIC ---
    function mapSelect(node) {
        document.querySelectorAll('.icon-node').forEach(i => i.classList.remove('selected'));
        document.getElementById('icon-'+node).classList.add('selected');
        
        const title = document.getElementById('map-title');
        const body = document.getElementById('map-body');
        
        if(node === 'router') {
            title.innerText = "System Status";
            body.innerHTML = `
                <div style="margin-bottom:5px; color:#aaa;">2.4GHz</div>
                <table style="width:100%; color:#fff;">
                    <tr><td style="padding:5px 0;">SSID:</td><td>${state.ssid}</td></tr>
                    <tr><td style="padding:5px 0;">Auth Method:</td><td>${state.auth}</td></tr>
                    <tr><td style="padding:5px 0;">Encryption:</td><td>AES</td></tr>
                    <tr><td style="padding:5px 0; border-top:1px solid #555; padding-top:10px;">LAN IP:</td><td style="border-top:1px solid #555; padding-top:10px;">${state.lanIp}</td></tr>
                    <tr><td style="padding:5px 0;">PIN Code:</td><td>12345670</td></tr>
                </table>`;
        } else if (node === 'internet') {
            title.innerText = "Internet Status";
            body.innerHTML = `
                <div style="margin-bottom:10px;"><b>Connection Type:</b> Automatic IP</div>
                <div style="margin-bottom:10px;"><b>WAN IP:</b> 203.0.113.10</div>
                <div style="margin-bottom:10px;"><b>DNS:</b> 8.8.8.8</div>
                <div style="color:var(--blue); font-weight:bold;">Connected</div>`;
        } else {
            title.innerText = "Client Status";
            body.innerHTML = `
                <div style="background:#222; padding:5px; margin-bottom:5px;">Desktop-PC (192.168.1.15)</div>
                <div style="background:#222; padding:5px;">Laptop-WLAN (192.168.1.22)</div>`;
        }
    }

    // --- HELPERS ---
    function toggleGuest() {
        const btn = document.getElementById('btn-guest-toggle');
        const form = document.getElementById('guest-form');
        if(btn.innerText === 'Enable') {
            btn.innerText = 'Disable';
            btn.style.background = '#00AAFF';
            form.style.display = 'block';
        } else {
            btn.innerText = 'Enable';
            btn.style.background = '#444';
            form.style.display = 'none';
        }
    }

    function runDiagnose() {
        const txt = document.getElementById('diag-out');
        const target = document.getElementById('tool_target').value || "www.google.com";
        const method = document.getElementById('tool_method').value;
        
        txt.value = `Running ${method} to ${target}...\n`;
        
        let i = 0;
        const interval = setInterval(() => {
            i++;
            if(method === 'Ping') {
                txt.value += `64 bytes from ${target}: icmp_seq=${i} ttl=54 time=24.5 ms\n`;
            } else {
                txt.value += `${i}  10.0.0.${i}  12.34 ms\n`;
            }
            if(i >= 5) {
                clearInterval(interval);
                txt.value += `--- ${target} statistics ---\nDone.`;
            }
        }, 500);
    }

    function save(name) {
        // Show loader
        document.getElementById('loader').style.display = 'flex';
        let p = 0;
        const pct = document.getElementById('pct');
        
        // Update State values
        if(name === 'Wireless General') {
            state.ssid = document.getElementById('wl_ssid').value;
            state.auth = document.getElementById('wl_auth').value;
            state.key = document.getElementById('wl_key').value;
            document.getElementById('head-ssid').innerText = state.ssid;
        }

        // UPDATE LAN IP STATE
        if(name === 'LAN IP') {
            state.lanIp = document.getElementById('lan_ip_addr').value;
        }

        const int = setInterval(() => {
            p += 20;
            pct.innerText = p + "%";
            if(p >= 100) {
                clearInterval(int);
                document.getElementById('loader').style.display = 'none';
                if(name.includes('Wireless') || name === 'LAN IP') mapSelect('router');
                alert(name + " Configured Successfully!");
            }
        }, 200);
    }
</script>

</body>
</html>
